(this["webpackJsonptrips-unknown"]=this["webpackJsonptrips-unknown"]||[]).push([[0],{26:function(e,t,a){e.exports=a(51)},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),s=a(1),i=a(2),l=a(4),u=a(3),m=a(5),p=a(6),d=a(13),h=a(8),f=a.n(h),b=a(11),E=(a(32),function(e){return r.a.createElement("div",{className:"alert alert-danger mx-5",role:"alert"},"Please Enter City and Country!")}),v=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"greeting center"},r.a.createElement("h1",{className:"section-header"},"Type in a city to get the local weather!"),r.a.createElement("h2",null,"You have to use US for United States as the input for country because of the API")),r.a.createElement("form",{onSubmit:e.getWeather},r.a.createElement("div",null,e.error?E():""),r.a.createElement("input",{type:"text",name:"city",placeholder:"City",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"country",placeholder:"Country",autoComplete:"off"}),r.a.createElement("button",null,"Get Weather")),r.a.createElement("div",{className:"buttons-section"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",null,"Back to Main Page")),r.a.createElement(p.b,{to:"/food"},r.a.createElement("button",null,"Go to Food Page")),r.a.createElement(p.b,{to:"/attractions"},r.a.createElement("button",null,"Go to Attractions Page"))))},g=(a(38),function(e){return r.a.createElement("div",{className:"weather-info"},e.city&&e.country&&r.a.createElement("p",{className:"weather__key"}," Location:",r.a.createElement("span",{className:"weather__value"}," ",e.city)),e.temp&&r.a.createElement("p",{className:"weather__key"}," Current Temperature:",r.a.createElement("span",{className:"weather__value"}," ",e.temp," ")),e.temp_max&&r.a.createElement("p",{className:"weather__key"}," Temperature High:",r.a.createElement("span",{className:"weather__value"}," ",e.temp_max," ")),e.temp_min&&r.a.createElement("p",{className:"weather__key"}," Temperature Low:",r.a.createElement("span",{className:"weather__value"}," ",e.temp_min," ")),e.humidity&&r.a.createElement("p",{className:"weather__key"}," Humidity:",r.a.createElement("span",{className:"weather__value"}," ",e.humidity,"%")),e.description&&r.a.createElement("p",{className:"weather__key"}," Conditions:",r.a.createElement("span",{className:"weather__value"}," ",e.description," ")),e.error&&r.a.createElement("p",{className:"weather__error"},e.error))}),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getWeather=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.elements.city.value,r=t.target.elements.country.value,"f3d7f5d4c72cfbaa2f55436ddc5646b1",!r||!n){e.next=15;break}return e.next=7,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(n,",").concat(r,"&appid=").concat("f3d7f5d4c72cfbaa2f55436ddc5646b1"));case 7:return c=e.sent,e.next=10,c.json();case 10:o=e.sent,a.setState({city:"".concat(o.name,", ").concat(o.sys.country),country:o.sys.country,main:o.weather[0].main,temp:o.main.temp,humidity:o.main.humidity,temp_max:o.main.temp_max,temp_min:o.main.temp_min,description:o.weather[0].description,error:!1}),console.log(o),e.next=16;break;case 15:a.setState({error:!0});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={temp:void 0,temp_max:void 0,temp_min:void 0,main:void 0,city:void 0,country:void 0,humidity:void 0,description:void 0,error:void 0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(v,{getWeather:this.getWeather}),r.a.createElement(g,{temp:this.state.temp,humidity:this.state.humidity,city:this.state.city,main:this.state.main,temp_max:this.state.temp_max,temp_min:this.state.temp_min,country:this.state.country,description:this.state.description,error:this.state.error}))}}]),t}(n.Component),w=(a(39),function(e){return r.a.createElement("div",{className:"alert alert-danger mx-5",role:"alert"},"Please Enter City and Country!")}),j=function(e){return r.a.createElement("div",null,r.a.createElement("h1",{className:"section-header"},"Type in a city to get some local attractions!"),r.a.createElement("h2",null,"You have to use US for United States as the input for country because of the API"),r.a.createElement("h2",null,"Also clicking backward and forward too quickly causes the API to freeze"),r.a.createElement("form",{className:"attractions-form",onSubmit:e.getAttractions},r.a.createElement("div",null,e.error?w():""),r.a.createElement("input",{type:"text",name:"city",placeholder:"City",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"state",placeholder:"state",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"country",placeholder:"Country",autoComplete:"off"}),r.a.createElement("button",null,"Get Local Attractions")),r.a.createElement("div",{className:"buttons-section"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",null,"Back to Main Page")),r.a.createElement(p.b,{to:"/weather"},r.a.createElement("button",null,"Go to Weather Page")),r.a.createElement(p.b,{to:"/food"},r.a.createElement("button",null,"Go to Food Page"))))},k=(a(40),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("Image PROPS=>",this.props),r.a.createElement("img",{src:this.props.src,alt:"#"})}}]),t}(n.Component)),O=(a(41),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("PROPS=>",this.props),r.a.createElement("div",{className:"attractions-info"},r.a.createElement("header",null,this.props.name),r.a.createElement("p",{className:"to-center"},"Address:",this.props.number," ",this.props.road,",",this.props.city,", ",this.props.state),r.a.createElement("p",null,this.props.des))}}]),t}(n.Component)),x=(a(42),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){console.log("Attraction Results props=>",this.props);var e=this.props.userClicked,t=!0===e?r.a.createElement("button",{onClick:this.props.getMoreAttractionsBackward,disabled:this.props.backwardsDisabled},"back"):null,a=!0===e?r.a.createElement("button",{onClick:this.props.getMoreAttractionsForward,disabled:this.props.forwardsDisabled},"forward"):null;return r.a.createElement("div",{className:"whole-attraction-result"},t,a,r.a.createElement("div",{className:"results-container"},r.a.createElement("div",{className:"grid"},this.props.attractions.map((function(e){return r.a.createElement("div",{className:"result"},r.a.createElement(k,{src:e.preview?e.preview.source:""}),r.a.createElement(O,{name:e.name,city:e.address&&e.address.city?e.address.city:"",des:e.wikipedia_extracts&&e.wikipedia_extracts.text?e.wikipedia_extracts.text:"",state:e.address&&e.address.state?e.address.state:"",href:e.wikipedia?e.wikipedia:"",road:e.address&&e.address.road?e.address.road:"",number:e.address&&e.address.house_number?e.house_number:""}))})))),t,a)}}]),t}(n.Component)),_=(a(43),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getAttractions=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n="5ae2e3f221c38a28845f05b637c385bf96afbd0ee0efa31f1d54771e",r=t.target.elements.city.value,c=t.target.elements.country.value,o=t.target.elements.state.value,fetch("https://api.opentripmap.com/0.1/en/places/geoname?name=".concat(r,"&country=").concat(c,"&apikey=").concat(n)).then((function(e){return e.json()})).then((function(e){a.setState({lat:e.lat,lon:e.lon,state:o,error:!1}),console.log("longitude:",a.state.lon),console.log("latitude:",a.state.lat);var t=a.state.lat,r=a.state.lon;fetch("https://api.opentripmap.com/0.1/en/places/radius?radius=80467.2&lon=".concat(r,"&lat=").concat(t,"&kinds=interesting_places&rate=2&limit=80&apikey=").concat(n)).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({attractions_response:e.features}),console.log("Request from 2nd Call",a.state.attractions_response);var t=a.state.attractions_response.map((function(e){return e.properties.xid}));a.setState({xIDs:t,userClicked:!0}),console.log("xids saved to state",a.state.xIDs);var n=a.state.xIDs.length>=8?8:a.state.xIDs.length-1,r=t.slice(0,n).map(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getLocation(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(r).then((function(e){console.log(e),a.setState({data:e,userClicked:!0})}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getLocation=function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.opentripmap.com/0.1/en/places/xid/".concat(t,"?apikey=5ae2e3f221c38a28845f05b637c385bf96afbd0ee0efa31f1d54771e")).then((function(e){return e.json()})).then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getMoreAttractionsBackward=function(){if(a.state.sliceStart>0){var e=a.state.sliceStart-8,t=a.state.sliceEnd-8,n=a.state.xIDs.slice(e,t).map(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getLocation(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.setState({sliceStart:e,sliceEnd:t},(function(){return console.log(a.state.sliceEnd)})),console.log({moreLocations:n}),Promise.all(n).then((function(e){console.log("This is in newdata:",e),a.setState({data:e,fwdButtonDisabled:!1})})),0===e&&a.setState({backButtonDisabled:!0})}else a.setState({backButtonDisabled:!0})},a.getMoreAttractionsForward=function(){var e=a.state.sliceStart+8,t=a.state.xIDs.length-a.state.sliceEnd>=8?a.state.sliceEnd+8:a.state.xIDs.length-a.state.sliceEnd;if(t<=a.state.xIDs.length-1){var n=a.state.xIDs.slice(e,t).map(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getLocation(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());n.length<8&&a.setState({disabled:"disabled"}),console.log({moreLocations:n}),a.setState({sliceStart:e,sliceEnd:t},(function(){return console.log(a.state.sliceEnd)})),Promise.all(n).then((function(e){console.log("This is in newdata:",e),a.setState({data:e,backButtonDisabled:!1})})),t>=a.state.xIDs.length-1&&a.setState({fwdButtonDisabled:!0})}else a.setState({fwdButtonDisabled:!0})},a.state={id:"",city:"",country:"",state:"",lon:0,lat:0,xIDs:"",name:"",attractions_response:{},error:void 0,data:[],sliceStart:0,sliceEnd:7,backButtonDisabled:!0,fwdButtonDisabled:!1,disabled:!1,userClicked:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){console.log("This is in data:",this.state.data);var e=this.state.data;return r.a.createElement("div",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"col-xs-7 form-container"},r.a.createElement(j,{getAttractions:this.getAttractions}),r.a.createElement(x,{attractions:e,getMoreAttractionsBackward:this.getMoreAttractionsBackward,backwardsDisabled:this.state.backButtonDisabled,getMoreAttractionsForward:this.getMoreAttractionsForward,forwardsDisabled:this.state.fwdButtonDisabled,userClicked:this.state.userClicked}))))}}]),t}(n.Component)),C=(a(44),function(e){return r.a.createElement("div",{className:"alert alert-danger mx-5",role:"alert"},"Please Enter City and Country!")}),N=function(e){return r.a.createElement("div",{className:"whole-page"},r.a.createElement("h1",{className:"section-header"},"Type in a city to get some restaurants!"),r.a.createElement("h2",null,"You have to use US for United States as the input for country because of the API"),r.a.createElement("form",{onSubmit:e.getFood},r.a.createElement("div",null,e.error?C():""),r.a.createElement("input",{type:"text",name:"city",placeholder:"City",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"state",placeholder:"state",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"country",placeholder:"Country",autoComplete:"off"}),r.a.createElement("button",null,"Get Restaurants")),r.a.createElement("div",{className:"buttons-section"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",null,"Back to Main Page")),r.a.createElement(p.b,{to:"/weather"},r.a.createElement("button",null,"Go to Weather Page")),r.a.createElement(p.b,{to:"/attractions"},r.a.createElement("button",null,"Go to Attractions Page"))))},S=(a(45),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("Image PROPS=>",this.props),r.a.createElement("img",{src:this.props.source,alt:"#"})}}]),t}(n.Component)),P=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("PROPS=>",this.props),r.a.createElement("div",null,r.a.createElement("header",null,this.props.name),r.a.createElement("p",null,"Price:",this.props.price," out of 4 dollar signs"),r.a.createElement("a",{href:this.props.href},"Get More Info and Make Reservations Here!"))}}]),t}(n.Component),A=(a(46),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("Food Results props=>",this.props),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"grid"},this.props.restaurants.map((function(e){return r.a.createElement("div",{className:"restaurant-indiv"},r.a.createElement(S,{source:e.image_url?e.image_url:""}),r.a.createElement(P,{name:e.name?e.name:"",href:e.reserve_url?e.reserve_url:"",price:e.price?e.price:""}))}))))}}]),t}(n.Component)),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getFood=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.elements.city.value,r=t.target.elements.country.value,c=t.target.elements.state.value,!r||!n){e.next=14;break}return e.next=7,fetch("https://opentable.herokuapp.com/api/restaurants?city=".concat(n,"&state=").concat(c,"&country=").concat(r));case 7:return o=e.sent,e.next=10,o.json();case 10:s=e.sent,a.setState({restaurants:s.restaurants,error:!1}),e.next=15;break;case 14:a.setState({error:!0});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={id:void 0,city:void 0,country:void 0,state:void 0,restaurants:[],error:void 0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.restaurants;return r.a.createElement("div",{className:"wrapper"},r.a.createElement(N,{getFood:this.getFood}),r.a.createElement(A,{restaurants:e}))}}]),t}(n.Component),B=a(25),I=a(16),M=(a(47),{API_BASE_URL:"https://morning-peak-14956.herokuapp.com/api/comments",DB_URL:"postgres://gjkizlzhzamzbp:266b353b056044408a785c91cedc210d674bf3030d15289d9d691da6d88580e9@ec2-54-243-239-199.compute-1.amazonaws.com:5432/d6oej2g81r97h5"}),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",comment:""},a.handleSubmit=a.handleSubmit.bind(Object(I.a)(a)),a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(B.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log("comment going in:",this.state.comment),console.log("name going in:",this.state.username),fetch("".concat(M.API_BASE_URL),{method:"POST",body:JSON.stringify({username:this.state.username,comment:this.state.comment}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).then((function(){return t.props.updateCommentsonMainPage()}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"whole-form"},r.a.createElement("form",{className:"submit-idea",onSubmit:this.handleSubmit},r.a.createElement("legend",{className:"paragraph"},"Leave a comment here! Tell users about a restaurant or attraction they should check out!"),r.a.createElement("div",null,r.a.createElement("input",{className:"comment-inputs",type:"text",value:this.state.username,onChange:this.handleChange,name:"username",placeholder:"Type Name Here",required:!0})),r.a.createElement("div",null,r.a.createElement("textarea",{className:"comment-inputs",value:this.state.comment,rows:"15",cols:"43",onChange:this.handleChange,placeholder:" Type Recommendation or Comment Here",name:"comment",required:!0})),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("button",{className:"comment-submit",type:"submit"},"Submit"))))}}]),t}(n.Component),R=(a(48),a(49),r.a.createContext({username:"",comment:""})),T=function(){var e=r.a.useContext(R),t=e.comments.map((function(e){return t=e,r.a.createElement("div",{className:"comment-indiv",key:t.id},r.a.createElement("p",null,t.comment),r.a.createElement("p",null,"from ",t.username));var t}));return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"grid"},t))},U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateCommentsonMainPage=function(){fetch("".concat(M.API_BASE_URL)).then((function(e){return e.json()})).then((function(e){console.log("comments from backend:",e),a.setState({comments:e})}))},a.state={comments:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(M.API_BASE_URL)).then((function(e){return e.json()})).then((function(t){console.log("comments from backend:",t),e.setState({comments:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"whole-page"},r.a.createElement("header",{className:"row-1 greeting"},r.a.createElement("h1",{className:"app-title"},"Trips Unknown"),r.a.createElement("p",null," get restaurants, attractions and restaurants")),r.a.createElement("div",{className:"row-2"},r.a.createElement(p.b,{to:"/weather"},r.a.createElement("button",{className:"flex-item"},"to /weather")),r.a.createElement(p.b,{to:"/food"},r.a.createElement("button",{className:"flex-item"},"to /food")),r.a.createElement(p.b,{to:"/attractions"},r.a.createElement("button",{className:"flex-item"},"to /attractions"))),r.a.createElement(R.Provider,{value:{comments:this.state.comments}},r.a.createElement(L,{updateCommentsonMainPage:this.updateCommentsonMainPage}),r.a.createElement(T,{updateCommentsonMainPage:this.updateCommentsonMainPage})))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={data:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,render:function(){return r.a.createElement(U,null)}}),r.a.createElement(d.a,{path:"/attractions",render:function(){return r.a.createElement(_,null)}}),r.a.createElement(d.a,{path:"/weather",render:function(){return r.a.createElement(y,null)}}),r.a.createElement(d.a,{path:"/food",render:function(){return r.a.createElement(D,null)}}))))}}]),t}(n.Component);a(50);o.a.render(r.a.createElement(p.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.8a08dc61.chunk.js.map